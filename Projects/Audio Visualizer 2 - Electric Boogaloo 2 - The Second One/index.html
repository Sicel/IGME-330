<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Audio Visualizer</title>
    <link rel="stylesheet" href="css/style.css" />
    <link href="css/animate.css" rel="stylesheet">

    <!--Color Picker-->
    <link href="css/color-picker/color-picker.min.css" rel="stylesheet">
    <script src="js/color-picker/color-picker.min.js"></script>
    <!---------------->

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/vue@latest/dist/vue.min.js"></script>

    <script type="module" src="js/loader.js"></script>
</head>

<body>
    <canvas id="canvas"></canvas>
    <div id="controls">
        <div ref='ui' id="ui">
            <h1 id='uiHeader'>Settings</h1>
            <template v-if='search'>
                <video ref='video' @loadeddata='loaded($event)' :src="selectedVideo"></video>
            </template>
            <template v-else>
                <audio controls v-bind:src="selectedSong"></audio>
                <select v-model="selectedSong">
                    <option disabled>Please Select a song</option>
                    <option v-for="song in songs" v-bind:value="song.src"> {{ song.name }} </option>
                </select>
            </template>
            <cp :song='video.title' :loaded='audioLoaded'>
                <template v-slot:time> {{ audioTime }} </template>
                <button class="button" :disabled='!audioLoaded' :class="{ 'pause': playing }" @click='play()'></button>
            </cp>
            <template v-if='!loading'>
                <search v-model='searchTerm' :find='find'></search>
                <div id='controlSections'>
                    <control-section name="Audio" :section="sections.audio" :effects="audioEffects"></control-section>
                    <control-section name="Visual" :section="sections.visual" :effects="visualEffects" :options="visualOptions"></control-section>
                </div>
            </template>
            <template v-else>
                <p>Loading...</p>
            </template>
        </div>
        <div class="container down" ref='downArrow' title="Show controls" @click="showUI($event)">
            <p class="downArrow"></p>
        </div>

        <lyrics :screenWidth='screenWidth' :lyrics='songLyrics'></lyrics>
    </div>
</body></html>
